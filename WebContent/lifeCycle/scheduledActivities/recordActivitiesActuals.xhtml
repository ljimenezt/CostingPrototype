<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:rich="http://richfaces.org/rich"
	xmlns:a="http://richfaces.org/a4j"
	xmlns:t="http://myfaces.apache.org/tomahawk"
	xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"
	xmlns:p="http://primefaces.org/ui"
	template="/plantillas/plantilla.xhtml">
	<ui:param name="action"
		value="recordActivitiesActualsAction.initializeRecordActual()" />
	<ui:param name="titulo"
		value="messageLifeCycle.record_activities_actuals_label_actual" />
	<ui:define name="body">
		<script type="text/javascript"
			src="#{request.contextPath}/js/jquery.js"></script>
		<script type="text/javascript"
			src="#{request.contextPath}/js/jquery.maxlength-min.js"></script>
		<script type="text/javascript">
			$g = jQuery.noConflict();
			$g(document).ready(function() {
				$g('#formHrReporting\\:descripcion').maxlength({
					events : [],
					max : 250,
					feedbackText : "#{mensaje.label_characters_left}",
					showFeedback : 'active'
				});
			});
		</script>
		<t:saveState value="#{recordActivitiesActualsAction}" />
		<t:saveState value="#{activitiesAndHrAction}" />
		<t:saveState value="#{activitiesAction}" />
		<t:saveState value="#{scheduledActivitiesAction}" />
		<t:saveState value="#{cycleAction}" />
		<t:saveState value="#{activityMaterialsAction}" />
		<t:saveState value="#{activitiesAndMachineAction}" />
		<t:saveState value="#{plotAction}" />
		<t:saveState value="#{activityPlotAction}" />
		<t:saveState value="#{detailsHarvestAction}" />
		<h:form id="formHrReporting">
			<rich:panel
				header="#{mensaje.label_register} #{messageLifeCycle.record_activities_actuals_label_actual}"
				styleClass="anchoUno MinH253P" id="panelRegistrarHrReporting">
				<t:fieldset styleClass="anchoDos BorderW2P">
					<legend class="etiquetaTitulo">#{messageLifeCycle.crops_label}</legend>
					<h:panelGrid columns="4"
						cellpadding="#{propPrototipoCostos['locate.fields.cellpadding']}"
						cellspacing="#{propPrototipoCostos['locate.fields.cellspacing']}"
						columnClasses="tdAlignTop W82P">
						<h:outputText value="#{messageLifeCycle.crop_names_label}"
							styleClass="etiquetaTitulo" />
						<h:selectOneMenu id="cropName"
							value="#{recordActivitiesActualsAction.idCropName}"
							styleClass="colTextoMediano" required="true"
							disabled="#{recordActivitiesActualsAction.listActivities.size() gt 0}">
							<f:selectItem itemLabel="#{mensaje.label_select}" itemValue="0" />
							<f:selectItems
								value="#{recordActivitiesActualsAction.listCropNames}" />
							<a:ajax event="change"
								listener="#{recordActivitiesActualsAction.loadComboCrops()}"
								render=":formHrReporting" />
						</h:selectOneMenu>
						<rich:message for="cropName" />
						<h:outputText value="" />

						<h:outputText value="#{messageLifeCycle.crops_label}"
							styleClass="etiquetaTitulo" />
						<h:selectOneMenu id="crop"
							value="#{recordActivitiesActualsAction.idCrop}"
							styleClass="colTextoMediano" required="true"
							disabled="#{recordActivitiesActualsAction.listActivities.size() gt 0}">
							<f:selectItem itemLabel="#{mensaje.label_select}" itemValue="0" />
							<f:selectItems value="#{recordActivitiesActualsAction.listCrops}" />
							<a:ajax event="change" render="@form" />
						</h:selectOneMenu>
						<rich:message for="crop" />
						<h:outputText value="" />

						<h:outputText value="#{messageLifeCycle.cycle_label}"
							styleClass="etiquetaTitulo"
							rendered="#{activitiesAction.flagCycle eq false or activitiesAction.listActivities eq null}" />
						<h:inputText styleClass="colTextoMediano"
							rendered="#{activitiesAction.flagCycle eq false or activitiesAction.listActivities eq null}"
							value="#{recordActivitiesActualsAction.cycle.activiyNames.activityName}"
							id="txtCycle" readonly="true"
							validator="#{encodeFilter.validarScripting}"
							disabled="#{activitiesAction.listActivities.size() gt 0 and activitiesAction ne null }" />
						<a:commandLink styleClass="iconsDataTable quitarDecoracionLink"
							render=":popupSearchCycle, :outputBuscar"
							action="#{cycleAction.initializeSearch()}"
							actionListener="#{cycleAction.setIdCrops(recordActivitiesActualsAction.idCrop)}"
							execute="formActivitiesAndHr"
							rendered="#{recordActivitiesActualsAction.listActivities eq null or (empty recordActivitiesActualsAction.listActivities)}"
							oncomplete="if (#{facesContext.maximumSeverity==null})
								{#{rich:component('popupSearchCycle')}.show();} ">
							<h:panelGrid styleClass="tablaIconoTexto" columns="2">
								<h:graphicImage value="/img/add_22.png"
									styleClass="verticalAlignMiddle" />
							</h:panelGrid>
							<rich:tooltip layout="block">
								<h:outputText value="#{mensaje.label_select}" />
							</rich:tooltip>
							<f:param name="param2" value="si" />
						</a:commandLink>
						<a:commandLink
							rendered="#{recordActivitiesActualsAction.listActivities eq null or (empty recordActivitiesActualsAction.listActivities)}"
							actionListener="#{recordActivitiesActualsAction.cleanCycle()}"
							render=":formHrReporting:txtCycle, :formHrReporting:txtCycles, formHrReporting"
							execute="@this">
							<h:graphicImage value="/img/editRemove_16.png" />
							<rich:tooltip layout="block">
								<h:outputText value="#{mensaje.label_remove}" />
							</rich:tooltip>
						</a:commandLink>
						<h:inputHidden id="txtCycles"
							value="#{recordActivitiesActualsAction.cycle.activiyNames.activityName}" />
					</h:panelGrid>
				</t:fieldset>
				<br />
				<t:fieldset styleClass="anchoDos BorderW2P"
					rendered="#{recordActivitiesActualsAction.idCrop gt 0 and recordActivitiesActualsAction.idCropName gt 0}">
					<legend class="etiquetaTitulo">#{messageCosts.activities_label_s}</legend>
					<h:panelGrid columns="4"
						cellpadding="#{propPrototipoCostos['locate.fields.cellpadding']}"
						cellspacing="#{propPrototipoCostos['locate.fields.cellspacing']}"
						columnClasses="tdAlignTop W82P,tdAlignTop"
						rendered="#{recordActivitiesActualsAction.listActivities eq null or (empty recordActivitiesActualsAction.listActivities)}">
						<h:outputText value="#{messageLifeCycle.activity_names_label}"
							styleClass="etiquetaTitulo"
							rendered="#{recordActivitiesActualsAction.idCycle eq 0}" />
						<h:outputText value=""
							rendered="#{recordActivitiesActualsAction.idCycle eq 0}" />
						<h:selectOneMenu id="activities"
							rendered="#{recordActivitiesActualsAction.idCycle eq 0}"
							value="#{recordActivitiesActualsAction.activities.idActivity}"
							styleClass="colTextoCorto" required="false"
							disabled="#{recordActivitiesActualsAction.idCrop eq 0 or recordActivitiesActualsAction.idCropName eq 0}">
							<f:selectItem itemLabel="#{mensaje.label_all}" itemValue="0" />
							<f:selectItems
								value="#{recordActivitiesActualsAction.listActivityNames}" />
						</h:selectOneMenu>
						<rich:message for="activities"
							rendered="#{recordActivitiesActualsAction.idCycle eq 0}" />

						<h:outputText value="#{mensaje.label_start_date}"
							styleClass="etiquetaTitulo" />
						<h:outputText value="" />
						<p:calendar
							value="#{recordActivitiesActualsAction.activities.initialDtBudget}"
							pattern="MM/dd/yyyy HH:mm"
							disabled="#{recordActivitiesActualsAction.idCrop eq 0 or recordActivitiesActualsAction.idCropName eq 0}"
							styleClass="W104P" id="fechaInicio" showOn="button"
							maxdate="#{recordActivitiesActualsAction.activities.finalDtBudget}"
							navigator="true"
							converterMessage="#{mensaje.message_validar_formato_fecha}">
							<p:ajax event="dateSelect" update="fechaFinal" />
						</p:calendar>
						<rich:message for="fechaInicio" />

						<h:outputText value="#{mensaje.label_end_date}"
							styleClass="etiquetaTitulo" />
						<h:outputText value="" />
						<p:calendar
							value="#{recordActivitiesActualsAction.activities.finalDtBudget}"
							pattern="MM/dd/yyyy HH:mm" styleClass="W104P" id="fechaFinal"
							showOn="button"
							mindate="#{recordActivitiesActualsAction.activities.initialDtBudget}"
							disabled="#{recordActivitiesActualsAction.idCrop eq 0 or recordActivitiesActualsAction.idCropName eq 0}"
							navigator="true"
							converterMessage="#{mensaje.message_validar_formato_fecha}">
							<p:ajax event="dateSelect" update="fechaInicio" />
						</p:calendar>
						<rich:message for="fechaFinal" />

						<h:outputText value="#{mensaje.label_description}"
							styleClass="etiquetaTitulo" />
						<h:outputText value="" />
						<h:inputTextarea
							value="#{recordActivitiesActualsAction.activities.description}"
							styleClass="colTextoMedianoTextArea" id="descripcion"
							validator="#{encodeFilter.validarScripting}" />
						<rich:message for="descripcion" />
					</h:panelGrid>
					<div align="center">
						<a:commandButton id="lnkActivityStandard"
							rendered="#{recordActivitiesActualsAction.listActivities eq null or (empty recordActivitiesActualsAction.listActivities)}"
							value="#{mensaje.label_show} #{messageCosts.activities_label_s}"
							disabled="#{recordActivitiesActualsAction.idCrop eq 0 or recordActivitiesActualsAction.idCropName eq 0}"
							render="formHrReporting, mensajes, mensajeBusqueda"
							actionListener="#{activitiesAction.initializeActivities(recordActivitiesActualsAction.activities, recordActivitiesActualsAction.idCrop, recordActivitiesActualsAction.idCycle, null)}"
							action="#{recordActivitiesActualsAction.assignActivities}"
							execute="formHrReporting">
							<f:param name="param2" value="si" />
						</a:commandButton>
					</div>

					<a:outputPanel id="activitiesActuals">
						<rich:dataTable value="#{activitiesAction.listActivities}"
							var="activity" id="seleccionadas" footerClass="H130P"
							styleClass="#{listaVacia ? 'BCTransparente' : 'dataTable'} anchoDos"
							rowClasses="#{activity.seleccionado ? 'rf-ddm-itm-sel backgroundNone left':'odd-row'} , #{activity.seleccionado ? 'rf-ddm-itm-sel backgroundNone left' : 'even-row'}"
							rendered="#{recordActivitiesActualsAction.listActivities.size() gt 0}">
							<rich:column styleClass="colIconoUno verticalAlignMiddle">

								<a:commandLink render="mensajes, mensajeBusqueda"
									actionListener="#{recordActivitiesActualsAction.consultResourcesByActivity()}">
									<h:graphicImage value="/img/seleccionarRadioCheck_16.png"
										styleClass="verticalAlignMiddle"
										rendered="#{activity.seleccionado eq true}" />
									<h:graphicImage value="/img/seleccionarRadioOut_16.png"
										styleClass="verticalAlignMiddle"
										rendered="#{activity.seleccionado eq false}" />
									<a:ajax event="click"
										listener="#{recordActivitiesActualsAction.assignActivity(activity)}"
										render="formHrReporting seleccionadas" />
									<f:param name="param2" value="si" />
									<f:setPropertyActionListener
										target="#{activitiesAndMachineAction.pagination.opcion}"
										value="f" />
								</a:commandLink>
							</rich:column>

							<rich:column styleClass="colIconoAjustable"
								rendered="#{recordActivitiesActualsAction.cycle ne null and recordActivitiesActualsAction.cycle.idCycle gt 0}">
								<a:outputPanel>
									<a:commandLink
										rendered="#{activity.activityName.harvest eq true}"
										actionListener="#{detailsHarvestAction.consultDetailsHarvest(activity)}"
										render=":formHarvest:popupHarvest, formHrReporting, seleccionadas"
										oncomplete="#{rich:component('popupHarvest')}.show();">
										<h:graphicImage value="/img/harvest_16.png"
											styleClass="verticalAlignMiddle" />
										<rich:tooltip layout="block" styleClass="campoTooltip">
											<h:outputText
												value="#{messageLifeCycle.harvest_details_label}" />
										</rich:tooltip>
										<f:param name="param2" value="si" />
									</a:commandLink>
								</a:outputPanel>
								<a:outputPanel styleClass="MarginL5P">
									<a:commandLink
										rendered="#{recordActivitiesActualsAction.cycle ne null and recordActivitiesActualsAction.cycle.idCycle gt 0}"
										action="#{recordActivitiesActualsAction.consultResourcesByActivity()}"
										actionListener="#{recordActivitiesActualsAction.assignActivity(activity)}"
										oncomplete="clickButton('#{rich:clientId('downloadReportCycle')}');"
										render="formHrReporting, mensajes, mensajeBusqueda">
										<h:graphicImage value="/img/excel_16.png"
											styleClass="verticalAlignMiddle" />
										<rich:tooltip layout="block" styleClass="campoTooltip">
											<h:outputText value="#{messageLifeCycle.cycle_label_report}" />
										</rich:tooltip>
										<f:param name="param2" value="si" />
										<f:setPropertyActionListener
											target="#{activitiesAndMachineAction.pagination.opcion}"
											value="f" />
									</a:commandLink>
									<h:commandButton styleClass="ocultar" id="downloadReportCycle"
										onclick="this.form.target='_blank'"
										action="#{activityPlotAction.createExcelPlot(recordActivitiesActualsAction.selectedActivity.cycle.idCycle)}">
									</h:commandButton>
								</a:outputPanel>
							</rich:column>

							<rich:column styleClass="colTextoCorto verticalAlignMiddle">
								<f:facet name="header">#{mensaje.label_name}</f:facet>
								<h:outputText value="#{activity.activityName.activityName}" />
							</rich:column>

							<rich:column styleClass="colTextoCorto verticalAlignMiddle">
								<f:facet name="header">#{mensaje.label_description}</f:facet>
								<h:outputText
									value="#{activity.description.length() gt propPrototipoCostos['locate.activitiesandhr.long.descripcion'] ? activity.description.substring(0, propPrototipoCostos['locate.activitiesandhr.long.descripcion']) : activity.description} #{activity.description.length() gt propPrototipoCostos['locate.activitiesandhr.long.descripcion'] ? '...' : ''}" />
								<rich:tooltip layout="block" styleClass="campoTooltip"
									rendered="#{activity.description ne null}">
									<h:outputText value="#{activity.description}" />
								</rich:tooltip>
							</rich:column>

							<rich:column styleClass="colFechaExtraLarga verticalAlignMiddle">
								<f:facet name="header">#{messageCosts.actual_label_start_time}</f:facet>
								<h:outputText value="#{activity.initialDtBudget}">
									<f:convertDateTime type="date" pattern="MMM dd, yyyy HH:mm:ss"
										locale="#{idioma.locale}" />
								</h:outputText>
							</rich:column>

							<rich:column styleClass="colFechaExtraLarga verticalAlignMiddle">
								<f:facet name="header">#{messageCosts.actual_label_end_time}</f:facet>
								<h:outputText value="#{activity.finalDtBudget}">
									<f:convertDateTime type="date" pattern="MMM dd, yyyy HH:mm:ss"
										locale="#{idioma.locale}" />
								</h:outputText>
							</rich:column>

							<rich:column styleClass="colNumeroMini verticalAlignMiddle">
								<f:facet name="header">#{messageCosts.actual_label_duration}</f:facet>
								<h:outputText value="#{activity.durationBudget}" />
							</rich:column>

							<rich:column styleClass="center colIconoUno verticalAlignMiddle">
								<f:facet name="header">#{messageCosts.cycle_standard_activities_label_dangerous}</f:facet>
								<h:graphicImage value="/img/peligroso_19.png"
									rendered="#{activity.dangerous eq true}" />
							</rich:column>

							<rich:column styleClass="colIconoUno verticalAlignMiddle center">
								<f:facet name="header">#{mensaje.label_cost_activity}</f:facet>
								<a:commandLink
									rendered="#{activity.calculateCosts eq true 
										and activity.costHrActual eq null 
										and activity.costMachinesEqActual eq null
										and activity.costMaterialsActual eq null}"
									oncomplete="if (#{facesContext.maximumSeverity==null})
								{#{rich:component('popUpConfirmEndActivity')}.show();} else{ 
								setFocus(#{rich:element('formGenerico:valFocus')}.value); }">
									<h:graphicImage value="/img/finalizarActividad_16.png" />
									<rich:tooltip layout="block">
										<h:outputText value="#{mensaje.button_calculate}" />
									</rich:tooltip>
								</a:commandLink>
							</rich:column>

							<f:facet name="footer">
								<rich:columnGroup rendered="#{listaVacia}">
									<rich:column colspan="5" styleClass="footTabla">
										<h:outputText
											value="#{mensaje.message_no_existen_registros_tabla}" />
									</rich:column>
								</rich:columnGroup>
							</f:facet>
						</rich:dataTable>
						<br />
						<a:outputPanel
							rendered="#{activitiesAction.listActivities.size() gt 0}">
							<div class="anchoDos center inBlock">
								<ui:include src="/plantillas/templatePagination.xhtml">
									<ui:param name="valParam2" value="si" />
									<ui:param name="conParam2" value="1" />
									<ui:param name="pager" value="pager" />
									<ui:param name="valReder" value="activitiesActuals" />
									<ui:param name="beanActionParam" value="#{activitiesAction}" />
									<ui:param name="metodoActionParam" value="searchActivities" />
								</ui:include>
							</div>
						</a:outputPanel>
					</a:outputPanel>
				</t:fieldset>
				<br />

				<a:outputPanel id="activityPlots"
					rendered="#{recordActivitiesActualsAction.selectedActivity.idActivity gt 0}">
					<t:fieldset styleClass="borderW2P">
						<legend class="etiquetaTitulo">#{messageLifeCycle.plot_label_s}
							-
							#{recordActivitiesActualsAction.selectedActivity.activityName.activityName}</legend>
						<div class="anchoDos">
							<a:commandLink styleClass="iconsDataTable quitarDecoracionLink"
								execute="@this"
								rendered="#{recordActivitiesActualsAction.selectedActivity.seleccionado ne false and recordActivitiesActualsAction.selectedActivity.costHrActual eq null}"
								render="popupSelectPlots"
								actionListener="#{activityPlotAction.initializePlots()}"
								oncomplete="if (#{facesContext.maximumSeverity==null})
								{#{rich:component('popupSelectPlots')}.show();} else{ 
								setFocus(#{rich:element('formGenerico:valFocus')}.value); }">
								<h:panelGrid styleClass="tablaIconoTexto" columns="2">
									<h:graphicImage value="/img/plots_16.png"
										styleClass="verticalAlignMiddle" />
									<h:outputText
										value="#{mensaje.label_assign} #{messageLifeCycle.plot_label_s}" />
								</h:panelGrid>
								<f:param name="param2" value="si" />
								<rich:tooltip layout="block">
									<h:outputText value="#{mensaje.label_select}" />
								</rich:tooltip>
							</a:commandLink>
						</div>
						<ui:param name="listaVacia1"
							value="#{activityPlotAction.listActivityPlotTemp.size() eq 0 or (activityPlotAction.listActivityPlotTemp eq null)}" />
						<rich:dataTable value="#{activityPlotAction.listActivityPlotTemp}"
							var="activityPlot" id="activityPlot" footerClass="H130P"
							styleClass="#{listaVacia1 ? 'BCTransparente' : 'dataTable'} anchoDos"
							rowClasses="odd-row, even-row">
							<rich:column styleClass="colIconoUno">
								<a:commandLink
									rendered="#{recordActivitiesActualsAction.selectedActivity.generalCostActual eq null}"
									actionListener="#{activityPlotAction.setActivityPlot(activityPlot)}"
									oncomplete="if (#{facesContext.maximumSeverity==null}) {#{rich:component('deleteActivityPlot')}.show();} else { setFocus(#{rich:element('formGenerico:valFocus')}.value); }"
									render="deleteActivityPlot">
									<h:graphicImage value="/img/delete_16.png" />
								</a:commandLink>
							</rich:column>

							<rich:column styleClass="colTextoMediano">
								<f:facet name="header">#{mensaje.label_name}</f:facet>
								<a:commandLink
									rendered="#{recordActivitiesActualsAction.selectedActivity.generalCostActual eq null and (recordActivitiesActualsAction.selectedActivity.activityName.replanted or recordActivitiesActualsAction.selectedActivity.activityName.harvest)}"
									actionListener="#{activityPlotAction.setActivityPlot(activityPlot)}"
									oncomplete="if (#{facesContext.maximumSeverity==null}) {#{rich:component('popupEditTachosReplant')}.show();} else { setFocus(#{rich:element('formGenerico:valFocus')}.value); }"
									value="#{activityPlot.activityPlotPK.plot.name}"
									render="popupEditTachosReplant" />
								<h:outputText
									rendered="#{recordActivitiesActualsAction.selectedActivity.generalCostActual ne null or (!recordActivitiesActualsAction.selectedActivity.activityName.replanted and !recordActivitiesActualsAction.selectedActivity.activityName.harvest)}"
									value="#{activityPlot.activityPlotPK.plot.name}" />
							</rich:column>

							<rich:column styleClass="colNumero">
								<f:facet name="header">#{messageLifeCycle.plot_numbers_trees}</f:facet>
								<h:outputText
									value="#{activityPlot.activityPlotPK.plot.numberOfTrees}" />
							</rich:column>

							<rich:column styleClass="colNumero">
								<f:facet name="header">#{messageLifeCycle.activity_plot_label_tachos_collected}</f:facet>
								<h:outputText value="#{activityPlot.tachosCollected}" />
							</rich:column>

							<rich:column styleClass="colNumero">
								<f:facet name="header">#{messageLifeCycle.activity_names_label_replant}</f:facet>
								<h:outputText value="#{activityPlot.replatedPlants}" />
							</rich:column>

							<f:facet name="footer">
								<rich:columnGroup rendered="#{listaVacia1}">
									<rich:column colspan="5" styleClass="footTabla">
										<h:outputText
											value="#{mensaje.message_no_existen_registros_tabla}" />
									</rich:column>
								</rich:columnGroup>
							</f:facet>
						</rich:dataTable>
						<br />
						<a:outputPanel id="pagerPlots"
							rendered="#{activityPlotAction.listActivityPlotTemp.size() gt 0}">
							<div class="anchoDos center inBlock">
								<ui:include src="/plantillas/templatePagination.xhtml">
									<ui:param name="conParam2" value="1" />
									<ui:param name="valId" value="7" />
									<ui:param name="pager" value="pagination" />
									<ui:param name="valReder" value="pagerPlots activityPlot" />
									<ui:param name="beanActionParam" value="#{activityPlotAction}" />
									<ui:param name="metodoActionParam" value="consultActivityPlot" />
								</ui:include>
							</div>
						</a:outputPanel>
					</t:fieldset>
				</a:outputPanel>
				<br />

				<a:outputPanel
					rendered="#{recordActivitiesActualsAction.selectedActivity.idActivity gt 0 and recordActivitiesActualsAction.selectedActivity.hrRequired eq true }">
					<t:fieldset styleClass="anchoDos BorderW2P">
						<legend class="etiquetaTitulo">
							#{messageHumanResources.human_resource_label} -
							#{recordActivitiesActualsAction.selectedActivity.activityName.activityName}</legend>
						<br />
						<ui:param name="listaVaciaA"
							value="#{activitiesAndHrAction.listActivitiesAndHrTemp eq null}" />
						<rich:dataTable
							value="#{activitiesAndHrAction.listActivitiesAndHrTemp}"
							var="actividadesTrabajadores" id="listaEmpleados"
							footerClass="H130P"
							styleClass="#{listaVaciaA ? 'BCTransparente' : 'dataTable'} anchoDos"
							rowClasses="odd-row, even-row">

							<rich:column styleClass="colTextoMediano">
								<f:facet name="header">#{mensaje.label_name}</f:facet>
								<a:commandLink
									actionListener="#{recordActivitiesActualsAction.setActivitiesAndHr(actividadesTrabajadores.clone())}"
									action="#{recordActivitiesActualsAction.validateMaxDate()}"
									oncomplete="if (#{facesContext.maximumSeverity==null}) {#{rich:component('popUpAgregarActualsActivitiesAndHr')}.show();} else { setFocus(#{rich:element('formGenerico:valFocus')}.value); }"
									value="#{actividadesTrabajadores.activitiesAndHrPK.hr.name} #{actividadesTrabajadores.activitiesAndHrPK.hr.familyName}"
									render="popUpAgregarActualsActivitiesAndHr"
									rendered="#{recordActivitiesActualsAction.selectedActivity.costHrActual eq null}">
								</a:commandLink>
								<h:outputText
									rendered="#{recordActivitiesActualsAction.selectedActivity.costHrActual ne null}"
									value="#{actividadesTrabajadores.activitiesAndHrPK.hr.name} #{actividadesTrabajadores.activitiesAndHrPK.hr.familyName}" />
							</rich:column>

							<rich:column styleClass="colFechaExtraLarga">
								<f:facet name="header">#{messageCosts.actual_label_start_time}</f:facet>
								<h:outputText
									value="#{actividadesTrabajadores.initialDateTimeActual}">
									<f:convertDateTime type="date" pattern="MMM dd, yyyy HH:mm:ss"
										locale="#{idioma.locale}" />
								</h:outputText>
							</rich:column>

							<rich:column styleClass="colFechaExtraLarga">
								<f:facet name="header">#{messageCosts.actual_label_end_time}</f:facet>
								<h:outputText
									value="#{actividadesTrabajadores.finalDateTimeActual}">
									<f:convertDateTime type="date" pattern="MMM dd, yyyy HH:mm:ss"
										locale="#{idioma.locale}" />
								</h:outputText>
							</rich:column>

							<rich:column styleClass="colNumero">
								<f:facet name="header">#{messageCosts.actual_label_duration}</f:facet>
								<h:outputText value="#{actividadesTrabajadores.durationActual}" />
							</rich:column>

							<rich:column styleClass="colValor">
								<f:facet name="header">#{messageCosts.actual_label_cost}</f:facet>
								<h:outputText value="#{actividadesTrabajadores.totalCostActual}" />
							</rich:column>

							<rich:column styleClass="colNumero">
								<f:facet name="header">#{messageCosts.activities_and_hr_label_normal_hours}</f:facet>
								<h:outputText value="#{actividadesTrabajadores.normalHours}" />
							</rich:column>

							<rich:column styleClass="colNumero">
								<f:facet name="header">#{messageCosts.activities_and_hr_label_overtime}</f:facet>
								<h:outputText value="#{actividadesTrabajadores.overtimeHours}" />
							</rich:column>

							<rich:column styleClass="colNumero">
								<f:facet name="header">#{messageCosts.activities_and_hr_label_total_hours}</f:facet>
								<h:outputText value="#{actividadesTrabajadores.totalHours}" />
							</rich:column>

							<f:facet name="footer">
								<rich:columnGroup rendered="#{listaVaciaA}">
									<rich:column colspan="8" styleClass="footTabla">
										<h:outputText
											value="#{mensaje.message_no_existen_registros_tabla}" />
									</rich:column>
								</rich:columnGroup>
							</f:facet>
						</rich:dataTable>
						<br />
						<a:outputPanel id="paginadoActivities"
							rendered="#{activitiesAndHrAction.listActivitiesAndHrTemp.size() gt 0}">
							<div class="anchoDos center inBlock">
								<ui:include src="/plantillas/templatePagination.xhtml">
									<ui:param name="valParam2" value="si" />
									<ui:param name="conParam2" value="1" />
									<ui:param name="valId" value="2" />
									<ui:param name="pager" value="paginationActivitiesAndHr" />
									<ui:param name="valReder"
										value="listaEmpleados paginadoActivities" />
									<ui:param name="beanActionParam"
										value="#{activitiesAndHrAction}" />
									<ui:param name="metodoActionParam"
										value="consultActivitiesAndHrByActivity" />
								</ui:include>
							</div>
						</a:outputPanel>
					</t:fieldset>
				</a:outputPanel>
				<br />
				<a:outputPanel
					rendered="#{recordActivitiesActualsAction.selectedActivity.idActivity gt 0 and recordActivitiesActualsAction.selectedActivity.machineRequired eq true}">
					<t:fieldset styleClass="anchoDos BorderW2P">
						<legend class="etiquetaTitulo">#{mensajeMenu.machines_label_administration}
							-
							#{recordActivitiesActualsAction.selectedActivity.activityName.activityName}</legend>
						<br />
						<ui:param name="listaVaciaA"
							value="#{activitiesAndMachineAction.listActivityMachine eq null}" />
						<rich:dataTable
							value="#{activitiesAndMachineAction.listActivityMachine}"
							var="machinesActivities" id="activityMachine" footerClass="H130P"
							styleClass="#{listaVaciaA ? 'BCTransparente' : 'dataTable'} anchoCuatro"
							rowClasses="odd-row, even-row">

							<rich:column styleClass="colTextoMediano">
								<f:facet name="header">#{mensaje.label_name}</f:facet>
								<a:commandLink
									actionListener="#{recordActivitiesActualsAction.setActivityMachine(machinesActivities.clone())}"
									oncomplete="if (#{facesContext.maximumSeverity==null}) {#{rich:component('popUpRecordMachineActual')}.show();} else { setFocus(#{rich:element('formGenerico:valFocus')}.value); }"
									value="#{machinesActivities.activityMachinePK.machines.name}"
									render="formRecordMachineActual"
									rendered="#{recordActivitiesActualsAction.selectedActivity.costMachinesEqActual eq null}">
								</a:commandLink>
								<h:outputText
									rendered="#{recordActivitiesActualsAction.selectedActivity.costMachinesEqActual ne null}"
									value="#{machinesActivities.activityMachinePK.machines.name}" />
							</rich:column>

							<rich:column styleClass="colFechaExtraLarga">
								<f:facet name="header">#{messageCosts.actual_label_start_time}</f:facet>
								<h:outputText value="#{machinesActivities.initialDateTime}">
									<f:convertDateTime type="date" pattern="MMM dd, yyyy HH:mm:ss"
										locale="#{idioma.locale}" />
								</h:outputText>
							</rich:column>

							<rich:column styleClass="colFechaExtraLarga">
								<f:facet name="header">#{messageCosts.actual_label_end_time}</f:facet>
								<h:outputText value="#{machinesActivities.finalDateTime}">
									<f:convertDateTime type="date" pattern="MMM dd, yyyy HH:mm:ss"
										locale="#{idioma.locale}" />
								</h:outputText>
							</rich:column>

							<rich:column styleClass="colValor">
								<f:facet name="header">#{messageCosts.actual_label_duration}</f:facet>
								<h:outputText value="#{machinesActivities.durationActual}" />
							</rich:column>

							<rich:column styleClass="colValor">
								<f:facet name="header">#{mensaje.label_cost} #{mensaje.label_total}</f:facet>
								<h:outputText
									value="#{machinesActivities.consumablesCostActual}" />
							</rich:column>

							<f:facet name="footer">
								<rich:columnGroup rendered="#{listaVaciaA}">
									<rich:column colspan="8" styleClass="footTabla">
										<h:outputText
											value="#{mensaje.message_no_existen_registros_tabla}" />
									</rich:column>
								</rich:columnGroup>
							</f:facet>
						</rich:dataTable>
						<br />
						<a:outputPanel id="pagerActivitiesMachines"
							rendered="#{activitiesAndMachineAction.listActivityMachine.size() gt 0}">
							<div class="anchoDos center inBlock">
								<ui:include src="/plantillas/templatePagination.xhtml">
									<ui:param name="valParam2" value="si" />
									<ui:param name="conParam2" value="1" />
									<ui:param name="valId" value="3" />
									<ui:param name="pager" value="pagination" />
									<ui:param name="valReder"
										value="activityMachine pagerActivitiesMachines" />
									<ui:param name="beanActionParam"
										value="#{activitiesAndMachineAction}" />
									<ui:param name="metodoActionParam"
										value="showActivitiesAndMachineForActivity" />
								</ui:include>
							</div>
						</a:outputPanel>
					</t:fieldset>
				</a:outputPanel>
				<br />
				<a:outputPanel
					rendered="#{recordActivitiesActualsAction.selectedActivity.idActivity gt 0 and recordActivitiesActualsAction.selectedActivity.materialsRequired eq true }">
					<t:fieldset styleClass="anchoDos BorderW2P">
						<legend class="etiquetaTitulo">
							#{mensajeWarehouse.materials_label_s} -
							#{recordActivitiesActualsAction.selectedActivity.activityName.activityName}</legend>
						<br />
						<ui:param name="listaVaciaA"
							value="#{activityMaterialsAction.listActivityMaterialsTemp eq null}" />
						<rich:dataTable
							value="#{activityMaterialsAction.listActivityMaterialsTemp}"
							var="activityMaterial" id="materialsList" footerClass="H130P"
							styleClass="#{listaVaciaA ? 'BCTransparente' : 'dataTable'} anchoCuatro"
							rowClasses="odd-row, even-row">
							<rich:column styleClass="colTextoMediano">
								<f:facet name="header">#{mensaje.label_name}</f:facet>
								<a:commandLink
									actionListener="#{activityMaterialsAction.cloneActivityMaterials(activityMaterial.clone(), true)}"
									oncomplete="if (#{facesContext.maximumSeverity==null}) {#{rich:component('popupAddActivitiesMaterials')}.show();} else { setFocus(#{rich:element('formGenerico:valFocus')}.value); }"
									value="#{activityMaterial.activityMaterialsPK.materials.name} #{activityMaterial.activityMaterialsPK.materials.presentation} #{activityMaterial.activityMaterialsPK.materials.measurementUnits.name}"
									render="popupAddActivitiesMaterials"
									rendered="#{recordActivitiesActualsAction.selectedActivity.costMaterialsActual eq null}">
								</a:commandLink>
								<h:outputText
									rendered="#{recordActivitiesActualsAction.selectedActivity.costMaterialsActual ne null}"
									value="#{activityMaterial.activityMaterialsPK.materials.name} #{activityMaterial.activityMaterialsPK.materials.presentation} #{activityMaterial.activityMaterialsPK.materials.measurementUnits.name}" />
							</rich:column>
							<rich:column styleClass="colFechaExtraLarga center">
								<f:facet name="header">#{messageCosts.actual_label_start_time}</f:facet>
								<h:outputText value="#{activityMaterial.dateTime}">
									<f:convertDateTime pattern="MMM dd, yyyy HH:mm:ss"
										locale="#{idioma.locale}" />
								</h:outputText>
							</rich:column>
							<rich:column styleClass="colNumeroMini">
								<f:facet name="header">#{mensajeWarehouse.deposits_label_actual_quantity}</f:facet>
								<h:outputText value="#{activityMaterial.quantityActual}" />
							</rich:column>
							<rich:column styleClass="colValorTextoLargo">
								<h:outputText value="#{activityMaterial.costActual}">
									<f:convertNumber maxFractionDigits="1" type="currency"
										currencySymbol="$" locale="#{idioma.locale}" />
								</h:outputText>
								<f:facet name="header">#{messageCosts.actual_label_cost}</f:facet>
							</rich:column>
							<f:facet name="footer">
								<rich:columnGroup rendered="#{listaVaciaA}">
									<rich:column colspan="4" styleClass="footTabla">
										<h:outputText
											value="#{mensaje.message_no_existen_registros_tabla}" />
									</rich:column>
								</rich:columnGroup>
							</f:facet>
						</rich:dataTable>
						<br />
						<a:outputPanel id="pagerActivityMaterial"
							rendered="#{activityMaterialsAction.listActivityMaterialsTemp.size() gt 0}">
							<div class="anchoCuatro center inBlock">
								<ui:include src="/plantillas/templatePagination.xhtml">
									<ui:param name="valParam2" value="si" />
									<ui:param name="conParam2" value="1" />
									<ui:param name="valId" value="4" />
									<ui:param name="pager" value="paginationActivityMaterials" />
									<ui:param name="valReder"
										value="materialsList pagerActivityMaterial" />
									<ui:param name="beanActionParam"
										value="#{activityMaterialsAction}" />
									<ui:param name="metodoActionParam"
										value="consultMaterialsByActivity" />
								</ui:include>
							</div>
						</a:outputPanel>
					</t:fieldset>
				</a:outputPanel>
			</rich:panel>
		</h:form>
		<ui:include src="templatePopupActivityPlot.xhtml" />
		<ui:include src="templateHRCosting.xhtml" />
		<ui:include src="templateMachinesActuals.xhtml" />
		<ui:include src="templateMaterialsActual.xhtml" />
		<ui:include src="templateCycles.xhtml">
			<ui:param name="beanActionParam"
				value="#{recordActivitiesActualsAction}" />
		</ui:include>
		<ui:include src="templateHarvest.xhtml" />

	</ui:define>
</ui:composition>