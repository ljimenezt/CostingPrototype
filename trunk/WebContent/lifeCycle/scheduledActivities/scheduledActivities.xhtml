<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:rich="http://richfaces.org/rich"
	xmlns:a="http://richfaces.org/a4j"
	xmlns:t="http://myfaces.apache.org/tomahawk"
	xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"
	xmlns:p="http://primefaces.org/ui"
	template="/plantillas/plantilla.xhtml">
	<ui:param name="action"
		value="cropActivitiesAction.agregarEditarActivitiesAndMachines(null)" />
	<ui:param name="titulo"
		value="mensajeMenu.scheduled_activity_label_management" />
	<ui:define name="body">
		<t:saveState value="#{scheduledActivitiesAction}" />
		<t:saveState value="#{activitiesAction}" />
		<t:saveState value="#{teamAction}" />
		<t:saveState value="#{machinesAction}" />
		<t:saveState value="#{materialsAction}" />
		<t:saveState value="#{cropActivitiesAction}" />
		<t:saveState value="#{activitiesAndHrAction}" />
		<t:saveState value="#{activityMaterialsAction}" />
		<t:saveState value="#{controllerSortField}" />
		<t:saveState value="#{cycleAction}" />
		<t:saveState value="#{activitiesAndMachineAction}" />
		<t:saveState value="#{cropsAction}" />
		<!-- Parameters for the order list -->
		<ui:param name="renderList" value="paginas" />
		<ui:param name="actionList" value="#{activitiesAction}" />
		<ui:param name="methodList" value="searchActivities" />

		<ui:param name="renderLista"
			value=":formBuscar:popupBuscar pnlListActivities" />
		<ui:param name="actionLista" value="#{activitiesAction}" />
		<ui:param name="methodLista" value="searchActivities" />
		<ui:param name="pager" value="pager" />
		<!-- parametros solo para botones del listado -->
		<ui:param name="nombreAction" value="activitiesAction" />
		<ui:param name="renderBuscar" value="formBuscar:popupBuscar paginas" />
		<ui:param name="popupBuscar" value="popupBuscar" />
		<ui:param name="metodoListarTodos" value="listAllActivities" />
		<ui:param name="emptyList"
			value="#{activitiesAction.listActivities eq null or (empty activitiesAction.listActivities)}" />

		<script type="text/javascript"
			src="#{request.contextPath}/js/jquery.js"></script>
		<script type="text/javascript"
			src="#{request.contextPath}/js/jquery.maxlength-min.js"></script>
		<script type="text/javascript">
			$g = jQuery.noConflict();
			$g(document).ready(function() {
				$g('#formScheduledActivities\\:description').maxlength({
					events : [],
					max : 250,
					feedbackText : "#{mensaje.label_characters_left}",
					showFeedback : 'active'
				});
			});
		</script>
		<h:form id="formScheduledActivities">
			<rich:panel
				header="#{mensaje.label_register} #{messageLifeCycle.scheduled_activities_label_budget}"
				styleClass="anchoUno MinH253P" id="panelScheduledActivities">
				<t:fieldset styleClass="anchoDos BorderW2P">
					<legend class="etiquetaTitulo">#{messageLifeCycle.crops_label}</legend>
					<h:panelGrid columns="4"
						cellpadding="#{propPrototipoCostos['locate.fields.cellpadding']}"
						cellspacing="#{propPrototipoCostos['locate.fields.cellspacing']}"
						columnClasses="tdAlignTop W82P,,">
						<h:outputText value="#{messageLifeCycle.crop_names_label}"
							styleClass="etiquetaTitulo" />
						<h:selectOneMenu id="cropName"
							value="#{scheduledActivitiesAction.idCropName}"
							styleClass="colTextoMediano" required="true"
							disabled="#{activitiesAction.listActivities.size() gt 0 and activitiesAction ne null}">
							<f:selectItem itemLabel="#{mensaje.label_select}" itemValue="0" />
							<f:selectItems
								value="#{scheduledActivitiesAction.optionsCropNames}" />
							<f:ajax event="change"
								listener="#{scheduledActivitiesAction.loadCropNamesCrop}"
								render="@form" />
						</h:selectOneMenu>
						<rich:message for="cropName" />
						<h:outputText value="" styleClass="etiquetaTitulo" />

						<h:outputText value="#{messageLifeCycle.crops_label}"
							styleClass="etiquetaTitulo" />
						<h:selectOneMenu id="crop"
							value="#{scheduledActivitiesAction.idCrop}"
							styleClass="colTextoMediano" required="true"
							disabled="#{activitiesAction.listActivities.size() gt 0 and activitiesAction ne null }">
							<f:selectItem itemLabel="#{mensaje.label_select}" itemValue="0" />
							<f:selectItems value="#{scheduledActivitiesAction.optionsCrops}" />
							<f:ajax event="change" render="@form" />
						</h:selectOneMenu>
						<rich:message for="crop" />
						<h:outputText value="" styleClass="etiquetaTitulo" />

						<h:outputText value="#{messageLifeCycle.cycle_label}"
							styleClass="etiquetaTitulo"
							rendered="#{activitiesAction.flagCycle eq false or activitiesAction.listActivities eq null}" />
						<h:inputText styleClass="colTextoMediano"
							rendered="#{activitiesAction.flagCycle eq false or activitiesAction.listActivities eq null}"
							value="#{scheduledActivitiesAction.cycle.activiyNames.activityName}"
							id="txtCycle" readonly="true"
							validator="#{encodeFilter.validarScripting}"
							disabled="#{activitiesAction.listActivities.size() gt 0 and activitiesAction ne null }" />
						<a:commandLink styleClass="iconsDataTable quitarDecoracionLink"
							render=":popupSearchCycle, :outputBuscar"
							action="#{cycleAction.initializeSearch()}"
							actionListener="#{cycleAction.setIdCrops(scheduledActivitiesAction.idCrop)}"
							execute="formActivitiesAndHr"
							rendered="#{activitiesAction.listActivities eq null}"
							oncomplete="if (#{facesContext.maximumSeverity==null})
								{#{rich:component('popupSearchCycle')}.show();} ">
							<h:panelGrid styleClass="tablaIconoTexto" columns="2">
								<h:graphicImage value="/img/add_22.png"
									styleClass="verticalAlignMiddle" />
							</h:panelGrid>
							<rich:tooltip layout="block">
								<h:outputText value="#{mensaje.label_select}" />
							</rich:tooltip>
							<f:param name="param2" value="si" />
						</a:commandLink>
						<a:commandLink
							rendered="#{activitiesAction.listActivities eq null}"
							actionListener="#{scheduledActivitiesAction.cleanCycle()}"
							render=":formScheduledActivities:txtCycle , :formScheduledActivities:txtCycles, formScheduledActivities"
							execute="@this">
							<h:graphicImage value="/img/editRemove_16.png" />
							<rich:tooltip layout="block">
								<h:outputText value="#{mensaje.label_remove}" />
							</rich:tooltip>
						</a:commandLink>
						<h:inputHidden id="txtCycles"
							value="#{scheduledActivitiesAction.cycle.activiyNames.idActivityName}" />
					</h:panelGrid>
				</t:fieldset>
				<br />
				<a:outputPanel id="pnlListActivities">
					<t:fieldset styleClass="anchoDos BorderW2P"
						rendered="#{scheduledActivitiesAction.idCrop gt 0 and scheduledActivitiesAction.idCropName gt 0}">
						<legend class="etiquetaTitulo">#{messageCosts.activities_label_s}</legend>
						<h:panelGrid columns="3"
							cellpadding="#{propPrototipoCostos['locate.fields.cellpadding']}"
							cellspacing="#{propPrototipoCostos['locate.fields.cellspacing']}"
							columnClasses="tdAlignTop W82P,,tdAlignTop"
							rendered="#{emptyList}">
							<h:outputText value="#{messageLifeCycle.activity_names_label}"
								styleClass="etiquetaTitulo"
								rendered="#{scheduledActivitiesAction.idCycle eq 0}" />
							<h:selectOneMenu id="activities"
								rendered="#{scheduledActivitiesAction.idCycle eq 0}"
								value="#{scheduledActivitiesAction.activities.idActivity}"
								styleClass="colTextoCorto" required="true">
								<f:selectItem itemLabel="#{mensaje.label_all}" itemValue="0" />
								<f:selectItems
									value="#{scheduledActivitiesAction.optionsActivityName}" />
							</h:selectOneMenu>
							<rich:message for="activities"
								rendered="#{scheduledActivitiesAction.idCycle eq 0}" />
							<h:outputText value="#{mensaje.label_start_date}"
								styleClass="etiquetaTitulo" />
							<p:calendar
								value="#{scheduledActivitiesAction.activities.initialDtBudget}"
								pattern="MM/dd/yyyy"
								disabled="#{scheduledActivitiesAction.idCropName eq 0 or scheduledActivitiesAction.idCrop eq 0}"
								styleClass="W104P" id="fechaInicio" showOn="button"
								maxdate="#{scheduledActivitiesAction.activities.finalDtBudget}"
								navigator="true"
								converterMessage="#{mensaje.message_validar_formato_fecha}">
								<p:ajax event="dateSelect" update="fechaFinal" />
							</p:calendar>
							<rich:message for="fechaInicio" />
							<h:outputText value="#{mensaje.label_end_date}"
								styleClass="etiquetaTitulo" />
							<p:calendar
								value="#{scheduledActivitiesAction.activities.finalDtBudget}"
								pattern="MM/dd/yyyy" styleClass="W104P" id="fechaFinal"
								showOn="button"
								mindate="#{scheduledActivitiesAction.activities.initialDtBudget}"
								disabled="#{scheduledActivitiesAction.idCropName eq 0 or scheduledActivitiesAction.idCrop eq 0}"
								navigator="true"
								converterMessage="#{mensaje.message_validar_formato_fecha}">
								<p:ajax event="dateSelect" update="fechaInicio" />
							</p:calendar>
							<rich:message for="fechaFinal" />
							<h:outputText value="#{mensaje.label_description}"
								styleClass="etiquetaTitulo" />
							<h:inputTextarea
								disabled="#{scheduledActivitiesAction.idCropName eq 0 or scheduledActivitiesAction.idCrop eq 0}"
								value="#{scheduledActivitiesAction.activities.description}"
								styleClass="colTextoMedianoTextArea" id="description"
								validator="#{encodeFilter.validarScripting}">
								<f:validateLength maximum="250" />
							</h:inputTextarea>
							<rich:message for="description" />
						</h:panelGrid>
						<div align="center">
							<a:commandButton id="lnkActivityStandard" rendered="#{emptyList}"
								disabled="#{scheduledActivitiesAction.idCropName eq 0 or scheduledActivitiesAction.idCrop eq 0}"
								render="formScheduledActivities, mensajes, mensajeBusqueda"
								action="#{activitiesAction.initializeActivities(scheduledActivitiesAction.activities, scheduledActivitiesAction.idCrop, scheduledActivitiesAction.idCycle, null)}"
								actionListener="#{scheduledActivitiesAction.setFromActivity(true)}"
								execute="formScheduledActivities"
								value="#{mensaje.label_show} #{messageCosts.activities_label_s}">
							</a:commandButton>
						</div>

						<a:outputPanel id="paginas"
							rendered="#{activitiesAction ne null and !emptyList}">
							<script type="text/javascript">
							$g = jQuery.noConflict();
						</script>
							<div align="right">
								<h:panelGrid id="pnlButtons" columns="6" cellpadding="0"
									cellspacing="0"
									rendered="#{scheduledActivitiesAction.fromActivity}">
									<a:commandLink id="lnkActivityNames"
										styleClass="quitarDecoracionLink"
										rendered="#{activitiesAction.flagCycle}"
										action="#{cropActivitiesAction.consultActivityNamesXCrops()}"
										render=":popupForm:popupActivityNames" execute="@form"
										oncomplete="if (#{facesContext.maximumSeverity==null}) {#{rich:component('popupActivityNames')}.show();} else { setFocus(#{rich:element('formGenerico:valFocus')}.value); }">
										<h:panelGrid styleClass="tablaIconoTexto" columns="2">
											<h:graphicImage value="/img/add_16.png"
												styleClass="verticalAlignMiddle" />
											<h:outputText
												value="#{messageCosts.cycle_standard_activities_label_add__standalone_activity}"
												actionListener="#{cropActivitiesAction.activities.crop.idCrop}" />
										</h:panelGrid>
										<rich:tooltip layout="block">
											<h:outputText value="#{mensaje.label_select}" />
										</rich:tooltip>
										<f:param name="param2" value="si" />
										<f:setPropertyActionListener value=""
											target="#{cropActivitiesAction.nameSearch}" />
										<f:setPropertyActionListener value="f"
											target="#{cropActivitiesAction.pagination.opcion}" />
									</a:commandLink>
									<ui:include src="/plantillas/plantillaBotonesListado.xhtml">
										<ui:param name="tieneVigencia" value="no" />
										<ui:param name="ocultarNuevo" value="si" />
										<ui:param name="ocultarPaginadoPor" value="si" />
									</ui:include>
								</h:panelGrid>
							</div>
							<rich:dataTable value="#{activitiesAction.listActivities}"
								var="activity" id="seleccionadas" footerClass="H130P"
								styleClass="#{emptyList ? 'BCTransparente' : 'dataTable'} anchoDos"
								rowClasses="#{activity.seleccionado ? 'rf-ddm-itm-sel backgroundNone left':'odd-row'} , #{activity.seleccionado ? 'rf-ddm-itm-sel backgroundNone left' : 'even-row'}"
								rendered="#{scheduledActivitiesAction.fromActivity}">
								<script type="text/javascript">
								$g=jQuery.noConflict();
    						</script>
								<rich:column styleClass="colIconoUno verticalAlignMiddle">
									<f:facet name="header" />
									<a:commandLink
										actionListener="#{scheduledActivitiesAction.selectedActivity(activity)}"
										oncomplete="setFocus(#{rich:element('formGenerico:valFocus')}.value);">
										<h:graphicImage value="/img/seleccionarRadioCheck_16.png"
											styleClass="verticalAlignMiddle"
											rendered="#{activity.seleccionado eq true}" />
										<h:graphicImage value="/img/seleccionarRadioOut_16.png"
											styleClass="verticalAlignMiddle"
											rendered="#{activity.seleccionado eq false}" />
										<a:ajax event="click"
											listener="#{activitiesAction.assignActivities(activity)}"
											render="formScheduledActivities, seleccionadas" />
									</a:commandLink>
								</rich:column>
								<rich:column styleClass="colIconoAjustable">
									<f:facet name="header" />
									<a:commandLink id="details"
										actionListener="#{scheduledActivitiesAction.selectedActivity(activity)}"
										render="PopUpDetalles formScheduledActivities"
										oncomplete="#{rich:component('PopUpDetalles')}.show()">
										<h:graphicImage value="/img/details_16.png" />
										<rich:tooltip layout="block">
											<h:outputText value="#{mensaje.label_details}" />
										</rich:tooltip>
									</a:commandLink>
									<h:outputText value="&#32;&#32;&#32;" />
									<a:commandLink rendered="#{activity.costHrActual eq null}"
										oncomplete="#{rich:component('popupEliminarLista')}.show()"
										render="popupEliminarLista, formScheduledActivities"
										actionListener="#{cropActivitiesAction.setRemoveList(activity)}">
										<h:graphicImage value="/img/delete_16.png" />
										<rich:tooltip layout="block">
											<h:outputText value="#{mensaje.button_remove}" />
										</rich:tooltip>
									</a:commandLink>
									<h:graphicImage value="/img/delete_no_available_16.png"
										rendered="#{activity.costHrActual ne null}" />
								</rich:column>
								<rich:column styleClass="colTextoCorto verticalAlignMiddle">
									<f:facet name="header">
										<ui:include src="/plantillas/templateHeaderSort.xhtml">
											<ui:param name="sortField" value="an.activityName" />
											<ui:param name="title" value="#{mensaje.label_name}" />
										</ui:include>
									</f:facet>
									<a:commandLink id="linkReg"
										rendered="#{activity.costHrActual eq null}"
										render="popupFormReg:popupRegActivity formScheduledActivities"
										execute="@form"
										actionListener="#{cropActivitiesAction.loadActivityToEdit(activity)}"
										action="#{scheduledActivitiesAction.selectedActivity(activity)}"
										oncomplete="#{rich:component('popupRegActivity')}.show(); setFocus('popupFormReg'); ">
										<h:outputText value="#{activity.activityName.activityName}" />
									</a:commandLink>
									<h:outputText value="#{activity.activityName.activityName}"
										rendered="#{activity.costHrActual ne null}" />
								</rich:column>
								<rich:column styleClass="colTextoMediano verticalAlignMiddle">
									<f:facet name="header">#{mensaje.label_description}</f:facet>
									<h:outputText
										value="#{activity.description.length() gt propPrototipoCostos['locate.activitiesandhr.long.descripcion'] ? activity.description.substring(0, propPrototipoCostos['locate.activitiesandhr.long.descripcion']) : activity.description} #{activity.description.length() gt propPrototipoCostos['locate.activitiesandhr.long.descripcion'] ? '...' : ''}" />
									<rich:tooltip layout="block" styleClass="campoTooltip"
										rendered="#{activity.description ne null}">
										<h:outputText value="#{activity.description}" />
									</rich:tooltip>
								</rich:column>
								<rich:column styleClass="colNumeroMini verticalAlignMiddle">
									<f:facet name="header">#{messageCosts.cycle_standard_activities_label_sequence_abbr}</f:facet>
									<h:outputText value="#{activity.sequenceNumber}" />
								</rich:column>
								<rich:column styleClass="colFechaExtraLarga verticalAlignMiddle">
									<f:facet name="header">
										<ui:include src="/plantillas/templateHeaderSort.xhtml">
											<ui:param name="title"
												value="#{messageCosts.budget_label_start_time}" />
											<ui:param name="sortField" value="a.initialDtBudget" />
										</ui:include>
									</f:facet>
									<h:outputText value="#{activity.initialDtBudget}">
										<f:convertDateTime type="date" pattern="MMM dd, yyyy HH:mm:ss"
											locale="#{idioma.locale}" />
									</h:outputText>
								</rich:column>
								<rich:column styleClass="colFechaExtraLarga verticalAlignMiddle">
									<f:facet name="header">
										<ui:include src="/plantillas/templateHeaderSort.xhtml">
											<ui:param name="title"
												value="#{messageCosts.budget_label_end_time}" />
											<ui:param name="sortField" value="a.finalDtBudget" />
										</ui:include>
									</f:facet>
									<h:outputText value="#{activity.finalDtBudget}">
										<f:convertDateTime type="date" pattern="MMM dd, yyyy HH:mm:ss"
											locale="#{idioma.locale}" />
									</h:outputText>
								</rich:column>
								<rich:column styleClass="colNumero verticalAlignMiddle">
									<f:facet name="header">#{messageCosts.budget_label_duration}</f:facet>
									<h:outputText value="#{activity.durationBudget}" />
								</rich:column>
								<rich:column styleClass="center colIconoDos verticalAlignMiddle">
									<f:facet name="header">#{messageCosts.cycle_standard_activities_label_dangerous}</f:facet>
									<h:graphicImage value="/img/peligroso_19.png"
										rendered="#{activity.dangerous eq true}" />
									<rich:tooltip layout="block"
										rendered="#{activity.dangerous eq true}">
										<h:outputText value="#{mensaje.label_dangerous}" />
									</rich:tooltip>
								</rich:column>
								<f:facet name="footer">
									<rich:columnGroup rendered="#{emptyList}">
										<rich:column colspan="9" styleClass="footTabla">
											<h:outputText
												value="#{mensaje.message_no_existen_registros_tabla}" />
										</rich:column>
									</rich:columnGroup>
								</f:facet>
							</rich:dataTable>
							<a:outputPanel
								rendered="#{activitiesAction.listActivities.size() gt 0}">
								<div class="anchoDos center inBlock">
									<ui:include src="/plantillas/templatePagination.xhtml">
										<ui:param name="conParam2" value="1" />
										<ui:param name="pager" value="pager" />
										<ui:param name="valReder" value="paginas" />
										<ui:param name="beanActionParam" value="#{activitiesAction}" />
										<ui:param name="metodoActionParam" value="searchActivities" />
									</ui:include>
								</div>
							</a:outputPanel>
						</a:outputPanel>
					</t:fieldset>
				</a:outputPanel>
				<br />
				<a:outputPanel
					rendered="#{scheduledActivitiesAction.selectedActivity.idActivity gt 0 and scheduledActivitiesAction.selectedActivity.hrRequired eq true}">
					<t:fieldset styleClass="anchoDos BorderW2P">
						<legend class="etiquetaTitulo" id="tooltip">
							#{messageHumanResources.human_resource_label} -
							#{scheduledActivitiesAction.selectedActivity.activityName.activityName}
						</legend>
						<h:panelGrid class="etiquetaTitulo" columns="2"
							rendered="#{scheduledActivitiesAction.selectedActivity.costHrActual ne null}">
							<h:graphicImage value="/img/info_16.png"
								styleClass="verticalAlignMiddle" />
							<h:outputText value="#{mensaje.message_can_not_make_changes}"></h:outputText>
						</h:panelGrid>
						<div class="anchoDos">
							<a:commandLink styleClass="iconsDataTable quitarDecoracionLink"
								rendered="#{scheduledActivitiesAction.selectedActivity.seleccionado ne false and scheduledActivitiesAction.selectedActivity.costHrActual eq null}"
								render="seleccionarTrabajador:popupTrabajador seleccionarTrabajador:trabajadores mensajes mensajeBusqueda"
								actionListener="#{activitiesAndHrAction.showTypeWorker()}"
								execute="formActivitiesAndHr"
								oncomplete="if (#{facesContext.maximumSeverity==null})
								{#{rich:component('popupTrabajador')}.show();} else{ 
								setFocus(#{rich:element('formGenerico:valFocus')}.value); }">
								<h:panelGrid styleClass="tablaIconoTexto" columns="2">
									<h:graphicImage value="/img/workers_16.png"
										styleClass="verticalAlignMiddle" />
									<h:outputText
										value="#{mensaje.label_assign} #{messageCosts.activities_and_hr_label_workers}" />
								</h:panelGrid>
								<rich:tooltip layout="block">
									<h:outputText value="#{mensaje.label_select}" />
								</rich:tooltip>
							</a:commandLink>
							<a:commandLink styleClass="iconsDataTable quitarDecoracionLink"
								rendered="#{scheduledActivitiesAction.selectedActivity.seleccionado ne false and scheduledActivitiesAction.selectedActivity.costHrActual eq null}"
								render="selectTeam:popupTeam selectTeam:team mensajes mensajeBusqueda"
								actionListener="#{teamAction.initializeTeam()}"
								execute="formActivitiesAndHr"
								oncomplete="if (#{facesContext.maximumSeverity==null})
								{#{rich:component('popupTeam')}.show();} else{ 
								setFocus(#{rich:element('formGenerico:valFocus')}.value); }">
								<h:panelGrid styleClass="tablaIconoTexto" columns="2">
									<h:graphicImage value="/img/team_16.png"
										styleClass="verticalAlignMiddle" />
									<h:outputText
										value="#{mensaje.label_assign} #{messageHumanResources.team_label_s}" />
								</h:panelGrid>
								<rich:tooltip layout="block">
									<h:outputText value="#{mensaje.label_select}" />
								</rich:tooltip>
								<f:param name="param2" value="si" />
							</a:commandLink>
						</div>
						<ui:param name="listaVaciaA"
							value="#{activitiesAndHrAction.listActivitiesAndHrTemp.size() eq 0 or (activitiesAndHrAction.listActivitiesAndHrTemp eq null)}" />
						<rich:dataTable
							value="#{activitiesAndHrAction.listActivitiesAndHrTemp}"
							var="actividadesTrabajadores" id="listaEmpleados"
							footerClass="H130P"
							styleClass="#{listaVaciaA ? 'BCTransparente' : 'dataTable'} anchoDos"
							rowClasses="odd-row, even-row">
							<rich:column styleClass=""
								rendered="#{(identity.autorizado('activitiesAndHrAction','A') or identity.autorizado('activitiesAndHrAction','D'))}">
								<a:commandLink render="popupEliminar"
									rendered="#{actividadesTrabajadores.initialDateTimeActual eq null}"
									actionListener="#{activitiesAndHrAction.setActivitiesAndHr(actividadesTrabajadores)}"
									oncomplete="#{rich:component('popupEliminar')}.show()">
									<h:graphicImage value="/img/delete_16.png" />
									<rich:tooltip layout="block">
										<h:outputText value="#{mensaje.button_remove}" />
									</rich:tooltip>
								</a:commandLink>
								<h:graphicImage value="/img/delete_no_available_16.png"
									rendered="#{actividadesTrabajadores.initialDateTimeActual ne null}" />
								<rich:tooltip layout="block">
									<h:outputText
										rendered="#{actividadesTrabajadores.initialDateTimeActual ne null}"
										value="#{messageLifeCycle.scheduled_activities_label_already_actual_hr}" />
								</rich:tooltip>

							</rich:column>
							<rich:column styleClass="colTextoMediano">
								<f:facet name="header">#{mensaje.label_name}</f:facet>
								<a:commandLink
									rendered="#{actividadesTrabajadores.initialDateTimeActual eq null}"
									action="#{activitiesAndHrAction.setActivitiesAndHr(actividadesTrabajadores.clone())}"
									oncomplete="if (#{facesContext.maximumSeverity==null}) {#{rich:component('popUpEditarActivitiesAndHr')}.show();} else { setFocus(#{rich:element('formGenerico:valFocus')}.value); }"
									value="#{actividadesTrabajadores.activitiesAndHrPK.hr.name} #{actividadesTrabajadores.activitiesAndHrPK.hr.familyName}"
									render="popUpEditarActivitiesAndHr">
									<f:setPropertyActionListener
										target="#{activitiesAndHrAction.idOvertimeRate}"
										value="#{actividadesTrabajadores.overtimePaymentRate.overtimepaymentid}" />
								</a:commandLink>
								<h:outputText
									rendered="#{actividadesTrabajadores.initialDateTimeActual ne null}"
									value="#{actividadesTrabajadores.activitiesAndHrPK.hr.name} #{actividadesTrabajadores.activitiesAndHrPK.hr.familyName}" />
							</rich:column>
							<rich:column styleClass="colFechaExtraLarga">
								<f:facet name="header">#{messageCosts.budget_label_start_time}</f:facet>
								<h:outputText
									value="#{actividadesTrabajadores.initialDateTimeBudget}">
									<f:convertDateTime type="date" pattern="MMM dd, yyyy HH:mm:ss"
										locale="#{idioma.locale}" />
								</h:outputText>
							</rich:column>
							<rich:column styleClass="colFechaExtraLarga">
								<f:facet name="header">#{messageCosts.budget_label_end_time}</f:facet>
								<h:outputText
									value="#{actividadesTrabajadores.finalDateTimeBudget}">
									<f:convertDateTime type="date" pattern="MMM dd, yyyy HH:mm:ss"
										locale="#{idioma.locale}" />
								</h:outputText>
							</rich:column>
							<rich:column styleClass="colNumero">
								<f:facet name="header">#{messageCosts.budget_label_duration}</f:facet>
								<h:outputText value="#{actividadesTrabajadores.durationBudget}" />
							</rich:column>
							<rich:column styleClass="colValor">
								<f:facet name="header">#{messageCosts.budget_label_cost}</f:facet>
								<h:outputText value="#{actividadesTrabajadores.totalCostBudget}">
									<f:convertNumber maxFractionDigits="1" type="currency"
										currencySymbol="$" locale="#{idioma.locale}" />
								</h:outputText>
							</rich:column>
							<rich:column styleClass="colNumero">
								<f:facet name="header">#{messageCosts.activities_and_hr_label_normal_hours}</f:facet>
								<h:outputText value="#{actividadesTrabajadores.normalHours}" />
							</rich:column>
							<rich:column styleClass="colNumero">
								<f:facet name="header">#{messageCosts.activities_and_hr_label_overtime}</f:facet>
								<h:outputText value="#{actividadesTrabajadores.overtimeHours}" />
							</rich:column>
							<rich:column styleClass="colNumero">
								<f:facet name="header">#{messageCosts.activities_and_hr_label_total_hours}</f:facet>
								<h:outputText value="#{actividadesTrabajadores.totalHours}" />
							</rich:column>
							<f:facet name="footer">
								<rich:columnGroup rendered="#{listaVaciaA}">
									<rich:column colspan="9" styleClass="footTabla">
										<h:outputText
											value="#{mensaje.message_no_existen_registros_tabla}" />
									</rich:column>
								</rich:columnGroup>
							</f:facet>
						</rich:dataTable>
						<br />
						<a:outputPanel id="paginadoEmpleados"
							rendered="#{activitiesAndHrAction.listActivitiesAndHrTemp.size() gt 0}">
							<div class="anchoDos center inBlock">
								<ui:include src="/plantillas/templatePagination.xhtml">
									<ui:param name="conParam2" value="1" />
									<ui:param name="valId" value="3" />
									<ui:param name="pager" value="paginationActivitiesAndHr" />
									<ui:param name="valReder"
										value="listaEmpleados paginadoEmpleados" />
									<ui:param name="beanActionParam"
										value="#{activitiesAndHrAction}" />
									<ui:param name="metodoActionParam"
										value="consultActivitiesAndHrByActivity" />
								</ui:include>
							</div>
						</a:outputPanel>
					</t:fieldset>
				</a:outputPanel>
				<br />
				<a:outputPanel
					rendered="#{scheduledActivitiesAction.selectedActivity.idActivity gt 0 and scheduledActivitiesAction.selectedActivity.machineRequired eq true}">
					<t:fieldset styleClass="anchoDos BorderW2P">
						<legend class="etiquetaTitulo" id="tooltip">
							#{mensajeMenu.machines_label_administration} -
							#{scheduledActivitiesAction.selectedActivity.activityName.activityName}
						</legend>
						<h:panelGrid class="etiquetaTitulo" columns="2"
							rendered="#{scheduledActivitiesAction.selectedActivity.costMachinesEqActual ne null}">
							<h:graphicImage value="/img/info_16.png"
								styleClass="verticalAlignMiddle" />
							<h:outputText value="#{mensaje.message_can_not_make_changes}"></h:outputText>
						</h:panelGrid>
						<div class="anchoCuatro">
							<a:commandLink styleClass="iconsDataTable quitarDecoracionLink"
								rendered="#{scheduledActivitiesAction.selectedActivity.seleccionado ne false and scheduledActivitiesAction.selectedActivity.costMachinesEqActual eq null}"
								render="selectMachines:popupMachines mensajes mensajeBusqueda"
								actionListener="#{activitiesAndMachineAction.listMachineTypes()}"
								action="#{machinesAction.initializeMachines()}"
								execute="formActivitiesAndMachine"
								oncomplete="if (#{facesContext.maximumSeverity==null})
								{#{rich:component('popupMachines')}.show();} else{ 
								setFocus(#{rich:element('formGenerico:valFocus')}.value); }">
								<h:panelGrid styleClass="tablaIconoTexto" columns="2">
									<h:graphicImage value="/img/machines_16.png"
										styleClass="verticalAlignMiddle" />
									<h:outputText
										value="#{mensaje.label_assign} #{messageMachine.machines_label_names_s}" />
								</h:panelGrid>
								<rich:tooltip layout="block">
									<h:outputText value="#{mensaje.label_select}" />
								</rich:tooltip>
								<f:setPropertyActionListener
									target="#{machinesAction.nameMachines}" value="0" />
							</a:commandLink>
						</div>
						<ui:param name="listaVacia"
							value="#{activitiesAndMachineAction.listActivityMachine.size() eq 0 or (activitiesAndMachineAction.listActivityMachine eq null)}" />
						<rich:dataTable
							value="#{activitiesAndMachineAction.listActivityMachine}"
							var="activitiesMachines" id="listMachines" footerClass="H130P"
							styleClass="#{listaVacia ? 'BCTransparente' : 'dataTable'} anchoCuatro"
							rowClasses="odd-row, even-row">
							<rich:column styleClass="colIconoUno">
								<a:outputPanel>
									<a:commandLink render="popupDeleteActivityMachine"
										rendered="#{activitiesMachines.durationActual eq null}"
										actionListener="#{activitiesAndMachineAction.setActivityMachine(activitiesMachines)}"
										oncomplete="#{rich:component('popupDeleteActivityMachine')}.show()">
										<h:graphicImage value="/img/delete_16.png" />
										<rich:tooltip layout="block">
											<h:outputText value="#{mensaje.button_remove}" />
										</rich:tooltip>
									</a:commandLink>
									<a:outputPanel
										rendered="#{activitiesMachines.durationActual ne null}">
										<h:graphicImage value="/img/delete_no_available_16.png" />
										<rich:tooltip layout="block">
											<h:outputText
												value="#{messageLifeCycle.scheduled_activities_label_already_actual_machine}" />
										</rich:tooltip>
									</a:outputPanel>
								</a:outputPanel>
							</rich:column>
							<rich:column styleClass="colTextoMediano">
								<f:facet name="header">#{mensaje.label_name}</f:facet>
								<a:commandLink
									rendered="#{activitiesMachines.durationActual eq null}"
									actionListener="#{activitiesAndMachineAction.setActivityMachine(activitiesMachines.clone())}"
									oncomplete="if (#{facesContext.maximumSeverity==null}) {#{rich:component('popUpUpdateActivitiesAndMachine')}.show();} else { setFocus(#{rich:element('formGenerico:valFocus')}.value); }"
									value="#{activitiesMachines.activityMachinePK.machines.name}"
									render="popUpUpdateActivitiesAndMachine" />
								<h:outputText
									rendered="#{activitiesMachines.durationActual ne null}"
									value="#{activitiesMachines.activityMachinePK.machines.name}" />
							</rich:column>
							<rich:column styleClass="colFechaExtraLarga">
								<f:facet name="header">#{messageCosts.budget_label_start_time}</f:facet>
								<h:outputText value="#{activitiesMachines.initialDateTime}">
									<f:convertDateTime type="date" pattern="MMM dd, yyyy HH:mm:ss"
										locale="#{idioma.locale}" />
								</h:outputText>
							</rich:column>
							<rich:column styleClass="colFechaExtraLarga">
								<f:facet name="header">#{messageCosts.budget_label_end_time}</f:facet>
								<h:outputText value="#{activitiesMachines.finalDateTime}">
									<f:convertDateTime type="date" pattern="MMM dd, yyyy HH:mm:ss"
										locale="#{idioma.locale}" />
								</h:outputText>
							</rich:column>
							<rich:column styleClass="colNumero">
								<f:facet name="header">#{messageCosts.budget_label_duration}</f:facet>
								<h:outputText value="#{activitiesMachines.durationBudget}" />
							</rich:column>
							<rich:column styleClass="colValor">
								<f:facet name="header">#{messageCosts.budget_label_cost}</f:facet>
								<h:outputText
									value="#{activitiesMachines.consumablesCostBudget}">
									<f:convertNumber maxFractionDigits="1" type="currency"
										currencySymbol="$" locale="#{idioma.locale}" />
								</h:outputText>
							</rich:column>
							<f:facet name="footer">
								<rich:columnGroup rendered="#{listaVacia}">
									<rich:column colspan="6" styleClass="footTabla">
										<h:outputText
											value="#{mensaje.message_no_existen_registros_tabla}" />
									</rich:column>
								</rich:columnGroup>
							</f:facet>
						</rich:dataTable>
						<br />
						<a:outputPanel id="pageMachines"
							rendered="#{activitiesAndMachineAction.listActivityMachine.size() gt 0}">
							<div class="anchoDos center inBlock">
								<ui:include src="/plantillas/templatePagination.xhtml">
									<ui:param name="conParam2" value="1" />
									<ui:param name="valId" value="2" />
									<ui:param name="pager" value="pagination" />
									<ui:param name="valReder" value="listMachines pageMachines" />
									<ui:param name="beanActionParam"
										value="#{activitiesAndMachineAction}" />
									<ui:param name="metodoActionParam"
										value="showActivitiesAndMachineForActivity" />
								</ui:include>
							</div>
						</a:outputPanel>
					</t:fieldset>
				</a:outputPanel>
				<br />
				<a:outputPanel
					rendered="#{scheduledActivitiesAction.selectedActivity.idActivity gt 0 and scheduledActivitiesAction.selectedActivity.materialsRequired eq true}">
					<t:fieldset styleClass="anchoDos BorderW2P">
						<legend class="etiquetaTitulo" id="tooltip">
							#{mensajeWarehouse.materials_label_s} -
							#{scheduledActivitiesAction.selectedActivity.activityName.activityName}
						</legend>
						<h:panelGrid class="etiquetaTitulo" columns="2"
							rendered="#{scheduledActivitiesAction.selectedActivity.costMaterialsActual ne null}">
							<h:graphicImage value="/img/info_16.png"
								styleClass="verticalAlignMiddle" />
							<h:outputText value="#{mensaje.message_can_not_make_changes}"></h:outputText>
						</h:panelGrid>
						<div class="anchoCuatro">
							<a:commandLink styleClass="iconsDataTable quitarDecoracionLink"
								rendered="#{scheduledActivitiesAction.selectedActivity.seleccionado ne false and scheduledActivitiesAction.selectedActivity.costMaterialsActual eq null}"
								render="formMaterials:popupMaterials mensajes mensajeBusqueda"
								action="#{activityMaterialsAction.initializeList()}"
								oncomplete="if (#{facesContext.maximumSeverity==null})
								{#{rich:component('popupMaterials')}.show();} else{ 
								setFocus(#{rich:element('formGenerico:valFocus')}.value); }">
								<f:param name="param2" value="si" />
								<h:panelGrid styleClass="tablaIconoTexto" columns="2">
									<h:graphicImage value="/img/material_16.png"
										styleClass="verticalAlignMiddle" />
									<h:outputText
										value="#{mensaje.label_assign} #{mensajeWarehouse.materials_label_s}" />
								</h:panelGrid>
								<rich:tooltip layout="block">
									<h:outputText value="#{mensaje.label_select}" />
								</rich:tooltip>
								<f:setPropertyActionListener
									target="#{materialsAction.idMaterialType}" value="0" />
							</a:commandLink>
						</div>
						<ui:param name="listaVaciaA"
							value="#{activityMaterialsAction.listActivityMaterialsTemp.size() eq 0 or (activityMaterialsAction.listActivityMaterialsTemp eq null)}" />
						<rich:dataTable
							value="#{activityMaterialsAction.listActivityMaterialsTemp}"
							var="activityMaterial" id="materialsTable" footerClass="H130P"
							styleClass="#{listaVaciaA ? 'BCTransparente' : 'dataTable'} anchoCuatro"
							rowClasses="odd-row, even-row">
							<rich:column styleClass="colIconoUno">
								<a:outputPanel>
									<a:commandLink render="popupDeleteActivityMaterial"
										rendered="#{activityMaterial.quantityActual eq null}"
										actionListener="#{activityMaterialsAction.setActivityMaterials(activityMaterial)}"
										oncomplete="#{rich:component('popupDeleteActivityMaterial')}.show()">
										<h:graphicImage value="/img/delete_16.png" />
										<rich:tooltip layout="block">
											<h:outputText value="#{mensaje.button_remove}" />
										</rich:tooltip>
									</a:commandLink>
									<a:outputPanel
										rendered="#{activityMaterial.quantityActual ne null}">
										<h:graphicImage value="/img/delete_no_available_16.png" />
										<rich:tooltip layout="block">
											<h:outputText
												value="#{messageLifeCycle.scheduled_activities_label_already_actual_machine}" />
										</rich:tooltip>
									</a:outputPanel>
								</a:outputPanel>
							</rich:column>
							<rich:column styleClass="colTextoLargo">
								<f:facet name="header">#{mensaje.label_name}</f:facet>
								<a:commandLink
									rendered="#{activityMaterial.quantityActual eq null}"
									actionListener="#{activityMaterialsAction.cloneActivityMaterials(activityMaterial.clone(), false)}"
									oncomplete="if (#{facesContext.maximumSeverity==null}) {#{rich:component('popUpUpdateActivitiesMaterials')}.show();} else { setFocus(#{rich:element('formGenerico:valFocus')}.value); }"
									value="#{activityMaterial.activityMaterialsPK.materials.name}  #{activityMaterial.activityMaterialsPK.materials.presentation} #{activityMaterial.activityMaterialsPK.materials.measurementUnits.name}"
									render="popUpUpdateActivitiesMaterials" />
								<h:outputText
									rendered="#{activityMaterial.quantityActual ne null}"
									value="#{activityMaterial.activityMaterialsPK.materials.name}  #{activityMaterial.activityMaterialsPK.materials.presentation} #{activityMaterial.activityMaterialsPK.materials.measurementUnits.name}" />
							</rich:column>
							<rich:column styleClass="colNumero">
								<f:facet name="header">#{messageCosts.budget_label_quantity}</f:facet>
								<h:outputText value="#{activityMaterial.quantityBudget}" />
							</rich:column>
							<rich:column styleClass="colValorTextoLargo">
								<h:outputText value="#{activityMaterial.costBudget}">
									<f:convertNumber maxFractionDigits="1" type="currency"
										currencySymbol="$" locale="#{idioma.locale}" />
								</h:outputText>
								<f:facet name="header">#{messageCosts.budget_label_cost}</f:facet>
							</rich:column>
							<f:facet name="footer">
								<rich:columnGroup rendered="#{listaVaciaA}">
									<rich:column colspan="4" styleClass="footTabla">
										<h:outputText
											value="#{mensaje.message_no_existen_registros_tabla}" />
									</rich:column>
								</rich:columnGroup>
							</f:facet>
						</rich:dataTable>
						<br />
						<a:outputPanel id="paginadoMaterials"
							rendered="#{activityMaterialsAction.listActivityMaterialsTemp.size() gt 0}">
							<div class="anchoCuatro center inBlock">
								<ui:include src="/plantillas/templatePagination.xhtml">
									<ui:param name="conParam2" value="1" />
									<ui:param name="valId" value="4" />
									<ui:param name="pager" value="paginationActivityMaterials" />
									<ui:param name="valReder"
										value="materialsTable paginadoMaterials" />
									<ui:param name="beanActionParam"
										value="#{activityMaterialsAction}" />
									<ui:param name="metodoActionParam"
										value="consultMaterialsByActivity" />
								</ui:include>
							</div>
						</a:outputPanel>
					</t:fieldset>
				</a:outputPanel>
				<br />
			</rich:panel>
		</h:form>
		<ui:include src="templatePopupDetailsActivity.xhtml" />
		<ui:include src="templateRegisterActivity.xhtml" />
		<ui:include src="templatePopupActivitiesAndHr.xhtml" />
		<ui:include src="templateActivitiesAndMachine.xhtml" />
		<ui:include src="templatePopupActivityMaterials.xhtml" />
		<ui:include src="templateCycles.xhtml">
			<ui:param name="beanActionParam" value="#{scheduledActivitiesAction}" />
		</ui:include>
	</ui:define>
</ui:composition>