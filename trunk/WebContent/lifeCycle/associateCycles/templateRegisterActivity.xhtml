<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:rich="http://richfaces.org/rich"
	xmlns:a="http://richfaces.org/a4j"
	xmlns:t="http://myfaces.apache.org/tomahawk"
	xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"
	xmlns:p="http://primefaces.org/ui">

	<rich:panel styleClass="fondoAnchoUno">
		<a:outputPanel id="outPutReg">
			<h:panelGrid columns="4"
				cellpadding="#{propPrototipoCostos['locate.fields.cellpadding']}"
				cellspacing="#{propPrototipoCostos['locate.fields.cellspacing']}"
				columnClasses="tdAlignTop,tdAlignTop,,tdAlignTop">
				<ui:param name="isRoutine"
					value="#{cropActivitiesAction.activities.routine}" />
				<ui:param name="minHour"
					value="#{cropActivitiesAction.systemProfile.activityDefaultStart==null ? controladorFechas.fechaActual() :  cropActivitiesAction.systemProfile.activityDefaultStart}" />

				<h:outputText styleClass="etiquetaTitulo"
					value="#{mensaje.label_sequence_number}" />
				<h:outputText value="" styleClass="required" />
				<h:inputText label="#{mensaje.label_sequence_number}"
					value="#{cropActivitiesAction.activities.sequenceNumber}"
					styleClass="colNumero" id="txtSecNum"
					converterMessage="#{mensaje.message_campo_positivo}"
					requiredMessage="#{mensaje.message_campo_requerido}">
					<f:validateLongRange minimum="0" />
				</h:inputText>
				<rich:message for="txtSecNum" />

				<h:outputText styleClass="etiquetaTitulo"
					value="#{mensaje.label_routine}" />
				<h:outputText value="" />
				<h:selectBooleanCheckbox
					value="#{cropActivitiesAction.activities.routine}" id="txtRoutine"
					styleClass="marginCheckbox">
					<a:ajax event="click"
						listener="#{cropActivitiesAction.setRoutineTime()}"
						render="outPutReg" />
				</h:selectBooleanCheckbox>
				<h:outputText value="" />

				<h:outputText styleClass="etiquetaTitulo"
					value="#{mensaje.label_date} #{mensaje.label_budget} " />
				<h:outputText value="*" styleClass="required" />
				<p:calendar required="true"
					requiredMessage="#{mensaje.message_campo_requerido}"
					value="#{cropActivitiesAction.activities.initialDtBudget}"
					showOn="button" navigator="true"
					converterMessage="#{mensaje.message_validar_formato_fecha}"
					id="fechaInicio" pattern="MM/dd/yyyy" readonlyInput="true"
					validator="#{controladorFechas.validarRangoFecha}">
					<f:attribute name="validarHora" value="si" />
					<p:ajax event="dateSelect" update="outPutReg"
						listener="#{cropActivitiesAction.setFinalDtBudget}" />
				</p:calendar>
				<rich:message for="fechaInicio" />

				<h:outputText styleClass="etiquetaTitulo"
					value="#{mensaje.label_start_time} #{mensaje.label_budget}"
					rendered="#{!isRoutine}" />
				<h:outputText value="*" styleClass="required"
					rendered="#{!isRoutine}" />
				<p:calendar required="true"
					requiredMessage="#{mensaje.message_campo_requerido}"
					value="#{cropActivitiesAction.systemProfile.activityDefaultStart}"
					showOn="button" navigator="true"
					converterMessage="#{mensaje.message_validar_formato_fecha}"
					onSelectUpdate="endTime" id="startTime" pattern="HH:mm"
					readonlyInput="true" rendered="#{!isRoutine}" timeOnly="true"
					validator="#{controladorFechas.validarRangoFecha}">
					<f:attribute name="validarHora" value="si" />
					<p:ajax event="dateSelect" update="outPutReg"
						listener="#{cropActivitiesAction.setFinalDtBudget}" />
				</p:calendar>
				<rich:message for="startTime" rendered="#{!isRoutine}" />

				<h:outputText styleClass="etiquetaTitulo"
					value="#{mensaje.label_end_time} #{mensaje.label_budget}"
					rendered="#{!isRoutine}" />
				<h:outputText value="*" styleClass="required"
					rendered="#{!isRoutine}" />
				<p:calendar
					value="#{cropActivitiesAction.systemProfile.activityDefaultEnd}"
					showOn="button" navigator="true" required="true"
					disabled="#{isRoutine}" timeOnly="true" rendered="#{!isRoutine}"
					converterMessage="#{mensaje.message_validar_formato_fecha}"
					id="endTime" pattern="HH:mm" readonlyInput="true"
					minHour="#{controladorFechas.getHours(minHour)}"
					validator="#{controladorFechas.validarRangoFecha}"
					requiredMessage="#{mensaje.message_campo_requerido}">
					<f:attribute name="validarHora" value="si" />
					<p:ajax event="dateSelect" update="fechaInicio, outPutReg"
						listener="#{cropActivitiesAction.setFinalDtBudget}" />
				</p:calendar>
				<rich:message for="endTime" rendered="#{!isRoutine}" />

				<h:outputText styleClass="etiquetaTitulo"
					value="#{messageCosts.activities_label_duration_budget}" />
				<h:outputText value="" styleClass="required" />
				<h:inputText
					value="#{cropActivitiesAction.activities.durationBudget}"
					label="#{messageCosts.activities_label_duration_budget}"
					styleClass="colNumero" id="txtDuration" readonly="true"
					validator="#{cropActivitiesAction.validateDate}"
					converterMessage="#{mensaje.message_campo_positivo}"
					requiredMessage="#{mensaje.message_campo_requerido}">
					<f:validateDoubleRange minimum="0" />
				</h:inputText>
				<rich:message for="txtDuration" />

				<h:outputText value="#{mensaje.label_description}"
					styleClass="etiquetaTitulo" />
				<h:outputText value="*" styleClass="required" style="top" />
				<h:inputTextarea
					value="#{cropActivitiesAction.activities.description}"
					styleClass="colTextoMedianoTextArea" id="txtDescripcion"
					validator="#{encodeFilter.validarScripting}">
					<f:validateLength maximum="200" />
				</h:inputTextarea>
				<rich:message for="txtDescripcion" />
			</h:panelGrid>
			<h:panelGrid columns="3"
				cellpadding="#{propPrototipoCostos['locate.fields.cellpadding']}"
				cellspacing="#{propPrototipoCostos['locate.fields.cellspacing']}"
				columnClasses="right,tdAlignTop,tdAlignTop">

				<h:selectBooleanCheckbox styleClass="marginCheckbox"
					value="#{cropActivitiesAction.activities.hrRequired}" id="txtHr">
				</h:selectBooleanCheckbox>
				<h:outputText value="#{mensaje.label_required_hr}"
					styleClass="etiquetaTitulo" />
				<rich:message for="txtHr" />

				<h:selectBooleanCheckbox styleClass="marginCheckbox"
					value="#{cropActivitiesAction.activities.machineRequired}"
					id="txtMachine">
				</h:selectBooleanCheckbox>
				<h:outputText styleClass="etiquetaTitulo"
					value="#{mensaje.label_required_machine}" />
				<rich:message for="txtMachine" />

				<h:selectBooleanCheckbox styleClass="marginCheckbox"
					value="#{cropActivitiesAction.activities.serviceRequired}"
					id="txtService">
				</h:selectBooleanCheckbox>
				<h:outputText styleClass="etiquetaTitulo"
					value="#{mensaje.label_required_service}" />
				<rich:message for="txtService" />

				<h:selectBooleanCheckbox styleClass="marginCheckbox"
					value="#{cropActivitiesAction.activities.materialsRequired}"
					id="txtMaterials">
				</h:selectBooleanCheckbox>
				<h:outputText styleClass="etiquetaTitulo"
					value="#{mensaje.label_required_material}" />
				<rich:message for="txtMaterials" />

				<h:selectBooleanCheckbox styleClass="marginCheckbox"
					value="#{cropActivitiesAction.activities.dangerous}" id="txtDange">
				</h:selectBooleanCheckbox>
				<h:outputText styleClass="etiquetaTitulo center"
					value="#{mensaje.label_dangerous}" />
				<h:outputText value="" />
				<rich:message for="txtDange" />
			</h:panelGrid>
			<br />
			<br />
			<div align="center">
				<a:commandButton render=":formConfirmar:popUpConfirmar,formGenerico"
					execute="popupFormReg, fechaInicio"
					action="#{cropActivitiesAction.validateDatesAllowed()}"
					oncomplete="if (#{facesContext.maximumSeverity==null}) {#{rich:component('popUpConfirmar')}.show();} else { setFocus(#{rich:element('formGenerico:valFocus')}.value); }"
					value="#{mensaje.button_save}" />
			</div>
		</a:outputPanel>
	</rich:panel>
</ui:composition>