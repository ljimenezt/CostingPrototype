<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:rich="http://richfaces.org/rich"
	xmlns:a="http://richfaces.org/a4j"
	xmlns:t="http://myfaces.apache.org/tomahawk"
	xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"
	xmlns:p="http://primefaces.org/ui">
	<script type="text/javascript">
		function extendDataTableSelectOneRadio(radio) {
		    var id = radio.name.substring(radio.name.lastIndexOf(':'));
		    var el = radio.form.elements;
		    for (var i = 0; i != el.length; i++) {
		        if (el[i].name.substring(el[i].name.lastIndexOf(':')) == id) {
		            el[i].checked = false;
		        }
		    }
		    radio.checked = true;
		}	
	</script>
	<t:fieldset styleClass="BorderW2P" id="fieldSetDatos">
		<legend class="etiquetaTitulo">#{mensaje.label_datos_basicos}</legend>

		<h:panelGrid columns="2" columnClasses="W70Per,W30Per tdAlignTop">
			<h:panelGrid columns="4"
				cellpadding="#{propCacaoSoft['locate.fields.cellpadding']}"
				cellspacing="#{propCacaoSoft['locate.fields.cellspacing']}"
				columnClasses="tdAlignTop,tdAlignTop,,colTextoMediano">

				<h:outputText value="#{messageOrganizations.organization_label}"
					styleClass="etiquetaTitulo" />
				<h:outputText value="" />
				<h:selectOneMenu value="#{empresaAction.empresa.organizacion.id}"
					id="organizacion">
					<f:selectItem itemLabel="#{mensaje.label_select}" itemValue="0" />
					<f:selectItems value="#{empresaAction.itemsOrganizaciones}" />
				</h:selectOneMenu>
				<rich:message for="organizacion" />

				<h:outputText value="#{mensaje.label_identification}"
					styleClass="etiquetaTitulo" />
				<h:outputText value="*" styleClass="required"
					rendered="#{empresaAction.opcion eq 'nuevo'}" />
				<h:outputText value=""
					rendered="#{empresaAction.opcion eq 'editar'}" />
				<h:inputText styleClass="colTextoCorto" maxlength="25"
					validator="#{empresaAction.validarNitEmpresaXSS}"
					rendered="#{idFormulario eq 'formRegistrarEmpresa' and empresaAction.opcion eq 'nuevo'}"
					id="nit" value="#{empresaAction.empresa.nit}">
					<f:validateLength maximum="25" />
				</h:inputText>
				<h:outputText value="#{empresaAction.empresa.nit}"
					styleClass="etiquetaValor"
					rendered="#{empresaAction.opcion eq 'editar'}" />
				<rich:message for="nit"
					rendered="#{idFormulario eq 'formRegistrarEmpresa'}" />

				<h:outputText value="#{mensaje.label_name}"
					styleClass="etiquetaTitulo" />
				<h:outputText value="*" styleClass="required" />
				<h:inputText styleClass="colTextoMediano" maxlength="100"
					id="nombre" validator="#{encodeFilter.validarScripting}"
					value="#{empresaAction.empresa.nombre}">
					<f:validateLength maximum="100" />
				</h:inputText>
				<rich:message for="nombre" />

				<h:outputText value="#{mensaje.label_address}"
					styleClass="etiquetaTitulo" />
				<h:outputText value="*" styleClass="required" />
				<h:inputText styleClass="colTextoMediano" id="direccion"
					validator="#{encodeFilter.validarScripting}"
					value="#{empresaAction.empresa.direccion}">
					<f:validateLength maximum="50" />
				</h:inputText>
				<rich:message for="direccion" />

				<h:outputText value="#{mensaje.label_telephone_number}"
					styleClass="etiquetaTitulo" />
				<h:outputText value="*" styleClass="required" />
				<h:inputText styleClass="colTextoCorto" maxlength="20" id="telefono"
					converterMessage="#{mensaje.message_validacion_decimal}"
					value="#{empresaAction.empresa.telefono}">
					<f:validateLength maximum="20" />
				</h:inputText>
				<rich:message for="telefono" />

				<h:outputText value="#{mensaje.label_email}"
					styleClass="etiquetaTitulo" />
				<h:outputText value="" />
				<h:inputText styleClass="colTextoMediano" maxlength="50" id="correo"
					value="#{empresaAction.empresa.correo}"
					validator="#{validacionesAction.validarEmailXSS}">
					<f:validateLength maximum="50" />
				</h:inputText>
				<rich:message for="correo" />

				<h:outputText value="#{mensaje.label_fax}"
					styleClass="etiquetaTitulo" />
				<h:outputText value="" />
				<h:inputText styleClass="colTextoCorto" maxlength="20" id="fax"
					value="#{empresaAction.empresa.fax}">
					<f:validateLength maximum="20" />
				</h:inputText>
				<rich:message for="fax" />

				<h:outputText value="#{mensaje.label_movil}"
					styleClass="etiquetaTitulo" />
				<h:outputText value="" />
				<h:inputText styleClass="colTextoCorto" maxlength="20" id="movil"
					value="#{empresaAction.empresa.movil}"
					converterMessage="#{mensaje.message_validacion_decimal}">
					<f:validateLength maximum="20" />
				</h:inputText>
				<rich:message for="movil" />

				<h:outputText value="#{messageBaseInformation.country_label}"
					styleClass="etiquetaTitulo" />
				<h:outputText value="*" styleClass="required" />
				<h:selectOneMenu value="#{empresaAction.empresa.pais.id}"
					id="comboPaisEmpresa">
					<f:selectItem itemLabel="#{mensaje.label_select}" itemValue="0" />
					<f:selectItems value="#{empresaAction.itemsPaises}" />
					<a:ajax event="valueChange"
						render="comboDepartamentoEmpresa, comboMunicipioEmpresa"
						execute="@this" listener="#{empresaAction.cargarDepartamentos}" />
				</h:selectOneMenu>
				<rich:message for="comboPaisEmpresa" />

				<h:outputText value="#{messageBaseInformation.department_label}"
					styleClass="etiquetaTitulo" />
				<h:outputText value="*" styleClass="required" />
				<h:selectOneMenu value="#{empresaAction.empresa.departamento.id}"
					id="comboDepartamentoEmpresa">
					<f:selectItem itemLabel="#{mensaje.label_select}" itemValue="0" />
					<f:selectItems value="#{empresaAction.itemDepartamentos}" />
					<a:ajax event="change" render="comboMunicipioEmpresa"
						listener="#{empresaAction.cargarMunicipios}" execute="@this" />
				</h:selectOneMenu>
				<rich:message for="comboDepartamentoEmpresa" />

				<h:outputText value="#{messageBaseInformation.municipality_label}"
					styleClass="etiquetaTitulo" />
				<h:outputText value="*" styleClass="required" />
				<h:selectOneMenu value="#{empresaAction.empresa.municipio.id}"
					id="comboMunicipioEmpresa">
					<f:selectItem itemLabel="#{mensaje.label_select}" itemValue="0" />
					<f:selectItems value="#{empresaAction.itemsMunicipios}" />
				</h:selectOneMenu>
				<rich:message for="comboMunicipioEmpresa" />
			</h:panelGrid>

			<h:panelGrid columns="1" cellpadding="0" rendered="#{modal ne '1'}">
				<t:fieldset>
					<legend class="etiquetaTitulo">#{mensaje.label_logo}</legend>
					<h:panelGrid columns="1" cellpadding="0" id="panelFotoEmpresa">
						<a:outputPanel
							rendered="#{empresaAction.nombreFotoLogo != null and !(empty empresaAction.nombreFotoLogo)}">
							<div class="uploadImg">
								<div class="closeImg">
									<a:commandLink action="#{empresaAction.borrarFilename()}"
										immediate="true" render=":#{idFormulario}:panelFotoEmpresa">
										<h:graphicImage value="/img/close_14.png"
											onmouseover="this.src='#{request.contextPath}/img/closeHover_14.png';"
											onmouseout="this.src='#{request.contextPath}/img/close_14.png';"
											styleClass="cursor" title="#{mensaje.label_cambiar_img}" />
									</a:commandLink>
								</div>
								<h:graphicImage
									value="#{empresaAction.carpetaArchivosTemporal}/#{empresaAction.nombreFotoLogo}"
									title="#{empresaAction.nombreFotoLogo}"
									styleClass="H200P W290P"
									rendered="#{empresaAction.cargarFotoTemporal}" />
								<h:graphicImage
									value="#{empresaAction.carpetaArchivos}/#{empresaAction.nombreFotoLogo}"
									title="#{empresaAction.nombreFotoLogo}"
									styleClass="H200P W290P"
									rendered="#{!empresaAction.cargarFotoTemporal}" />
							</div>
						</a:outputPanel>
						<a:outputPanel>
							<h:graphicImage value="/img/noImage_240X203.png"
								rendered="#{empresaAction.nombreFotoLogo eq null or empty empresaAction.nombreFotoLogo}"
								styleClass="H200P W290P" />
							<p:fileUpload id="uploadLogo" dragDropSupport="true"
								rendered="#{empresaAction.nombreFotoLogo eq null or empty empresaAction.nombreFotoLogo}"
								label="#{mensaje.label_seleccione_archivo}" mode="advanced"
								auto="true" fileUploadListener="#{empresaAction.submit}"
								update="panelFotoEmpresa"
								onstart="#{rich:component('statPane')}.show();"
								oncomplete="#{rich:component('statPane')}.hide();" />
							<rich:message for="uploadLogo" styleClass="errors" />
							<div class="etiquetaTitulo">
								<hr />
								<h:outputText
									value="#{mensaje.label_ext_permitida}: #{propCacaoSoft['locate.ext.permitidas.img']}" />
								<hr />
							</div>
						</a:outputPanel>
					</h:panelGrid>
				</t:fieldset>
			</h:panelGrid>
		</h:panelGrid>
	</t:fieldset>
</ui:composition>